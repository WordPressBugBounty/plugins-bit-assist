!function(){"use strict";const t=window?.bit_assist_?.api?.base,i="1"!==window?.bit_assist_?.isDev?`${t}/iframe`:"http://localhost:5000",o=new URL(i).origin,e=window?.bit_assist_?.api?.separator||"?",n="http:"===window.location.protocol?"i":"s",a="localhost"===window.location.hostname?window.location.host:window.location.hostname,s=window.location.href;let d="100px",r="100px",c=0;const w=`\n#bit-assist-widget-container{--ba-top:auto;--ba-left:auto;--ba-bottom:10;--ba-right:10;position:fixed;z-index:2147483646;bottom:0;right:0;width:${r};height:${d};max-width:100%}\n#bit-assist-widget-container.bottom-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.bottom-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-iframe{width:100%;height:100%;border:none;}\n.bit-assist-hide{visibility:hidden;pointer-events:none}\n`,l=document.createElement("style");l.appendChild(document.createTextNode(w));const h=document.createElement("div");h.id="bit-assist-widget-container",_();const p=document.createElement("iframe");function u(t,i=!1){const o=window.scrollY,e=document.body.offsetHeight,n=window.innerHeight,a=Math.round(o/(e-n)*100);if(!i)return a;!c&&a>=i?(c=1,f(a)):c&&a<i&&(c=0,f(a))}function f(t){p.contentWindow.postMessage({action:"scrollPercent",scrollPercent:t},o)}function b(t,i){r=`${t}px`,d=`${i}px`,Object.assign(h.style,{width:r,height:d})}p.title="wp-bit-assist",p.src=`${i}${e}clientDomain=${n}-protocol-bit-assist-${a}`,p.id="bit-assist-widget-iframe",p.setAttribute("allowfullscreen",""),p.setAttribute("scrolling","no"),h.appendChild(p),document.body.append(l,h),document.addEventListener("click",(t=>{h.classList.contains("bit-assist-open")&&!t.target.closest("#bit-assist-widget-container")&&p.contentWindow.postMessage({action:"clickOutside"},o)})),window.addEventListener("message",(i=>{if(i.origin!==o)return;const{action:e}=i.data;if("getClientInfo"===e){const i=u(),e=document.documentElement.offsetWidth,n=window.innerHeight;p.contentWindow.postMessage({action:"windowLoaded",url:s,winWidth:e,winHeight:n,scrollPercent:i,apiEndPoint:t},o)}else if("widgetLoaded"===e){const{height:t,width:o,position:e,top:n,bottom:a,left:s,right:d,pageScroll:r}=i.data;!function(t,i,o,e,n){t.includes("top")&&h.style.setProperty("--ba-top",`${i}px`);t.includes("bottom")&&h.style.setProperty("--ba-bottom",`${o}px`);t.includes("left")&&h.style.setProperty("--ba-left",`${e}px`);t.includes("right")&&h.style.setProperty("--ba-right",`${n}px`)}(e,n,a,s,d),h.classList.remove("bit-assist-hide"),h.classList.add(e),b(o,t),r>0&&window.addEventListener("scroll",(t=>u(0,r)))}else if("widgetOpen"===e){A()&&!0===Boolean(window.Tawk_API?.isChatMaximized?.())&&window.Tawk_API?.minimize();const{isWidgetOpen:t}=i.data;h.classList.toggle("bit-assist-open",t)}else if("removeWidget"===e)h.remove(),l.remove();else if("resetWidgetSize"===e){const{height:t,width:o}=i.data;b(o,t)}else if("chatWidgetClick"===e){const{chatWidgetName:t}=i.data;!function(t){P(),"tawk"===t&&function(){if(!g)return L("Tawk"),null;try{window.Tawk_API.showWidget(),window.Tawk_API.toggle(),_()}catch(t){console.log(t),L("Tawk"),k()}}();"crisp"===t&&function(){if(!v)return L("Crisp"),null;try{window.$crisp.push(["do","chat:show"]),window.$crisp.push(["do","chat:toggle"]),_()}catch{L("Crisp"),k()}}();"intercom"===t&&function(){if(!y)return L("Intercom"),null;try{window.Intercom("show"),_()}catch(t){console.log(t),L("Intercom"),k()}}();"tidio"===t&&function(){if(!m)return L("Tidio"),null;try{window.tidioChatApi.open(),window.tidioChatApi.show(),_()}catch(t){console.log(t),L("Tawk"),k()}}()}(t)}else if("bitAssistChannelClick"===e){const{channelInfo:t}=i.data;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"bitAssistChannel",...t})}})),window.addEventListener("load",(()=>{A()&&(window.Tawk_API.onLoad=function(){g=!0,window.Tawk_API.hideWidget()},window.Tawk_API.onChatMinimized=function(){window.Tawk_API.hideWidget(),k()}),$()&&(v=!0,window.$crisp.push(["do","chat:hide"]),window.$crisp.push(["on","chat:closed",function(){window.$crisp.push(["do","chat:hide"]),k()}])),C()&&(y=!0,window.Intercom("update",{hide_default_launcher:!0}),window.Intercom("onShow",(()=>{_()})),window.Intercom("onHide",(()=>{k()}))),I()&&(window.tidioChatApi.hide(),window.tidioChatApi.on("ready",(()=>{m=!0,window.tidioChatApi.hide()})),window.tidioChatApi.on("close",(()=>{k(),window.tidioChatApi.hide()})))}));let g=!1,m=!1,v=!1,y=!1;function A(){return"undefined"!=typeof Tawk_API}function $(){return"undefined"!=typeof $crisp}function C(){return"undefined"!=typeof Intercom}function I(){return"undefined"!=typeof tidioChatApi}function k(){h.classList.remove("bit-assist-hide"),P()}function P(){A()&&window.Tawk_API?.minimize?.(),$()&&window.$crisp?.push?.(["do","chat:hide"]),C()&&window.Intercom?.("hide"),I()&&window.tidioChatApi?.hide?.()}function _(){h.classList.add("bit-assist-hide")}function L(t){return alert(`Sorry, ${t} is not loaded yet!`)}}();
